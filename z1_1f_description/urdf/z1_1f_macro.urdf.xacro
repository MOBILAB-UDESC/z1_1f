<?xml version="1.0"?>

<robot xmlns:xacro="http://ros.org/wiki/xacro">

    <xacro:include filename="$(find z1_1f_description)/urdf/macros.urdf.xacro" />

    <xacro:property name="finger_to_control" value="jointGripper" />

    <xacro:macro name="load_gripper" params="
        *origin
        parent
        prefix
        sim_gazebo">

        <joint name="${prefix}gripper_stator_joint" type="fixed">
            <xacro:insert_block name="origin" />
            <parent link="${prefix}${parent}" />
            <child link="${prefix}gripperStator" />
            <axis xyz="0 0 0" />
        </joint>

        <link name="${prefix}gripperStator">
            <inertial>
                <origin rpy="0 0 0" xyz="0.04764427 -0.00035819 -0.00249162" />
                <mass value="0.52603655" />
                <inertia
                    ixx="0.00038683" ixy="-0.00000359" ixz="0.00007662"
                    iyy="0.00068614" iyz="0.00000209"
                    izz="0.00066293" />
            </inertial>
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://z1_1f_description/meshes/visual/z1_GripperStator.dae" />
                </geometry>
                <material name="z1_1f_light_grey" />
            </visual>
            <collision>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://z1_1f_description/meshes/collision/z1_GripperStator.STL" />
                </geometry>
            </collision>
        </link>

        <joint name="${prefix}jointGripper" type="revolute">
            <origin rpy="0 0 0" xyz="0.049 0.0 0" />
            <parent link="${prefix}gripperStator" />
            <child link="${prefix}gripperMover" />
            <axis xyz="0 1 0" />
            <limit lower="${min_finger_joint_pos}" upper="${max_finger_joint_pos}"
                    effort="${finger_joint_effort}" velocity="${finger_joint_vel}" />
            <dynamics damping="${finger_joint_damping}" friction="${finger_joint_friction}" />
        </joint>

        <link name="${prefix}gripperMover">
            <inertial>
                <origin rpy="0 0 0" xyz="0.01320633 0.00476708 0.00380534" />
                <mass value="0.27621302" />
                <inertia
                    ixx="0.00017716" ixy="0.00001683" ixz="-0.00001786"
                    iyy="0.00026787" iyz="0.00000262"
                    izz="0.00035728" />
            </inertial>
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://z1_1f_description/meshes/visual/z1_GripperMover.dae" />
                </geometry>
                <material name="z1_1f_light_grey" />
            </visual>
            <collision>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://z1_1f_description/meshes/collision/z1_GripperMover.STL" />
                </geometry>
            </collision>
        </link>

        <xacro:include filename="$(find z1_1f_description)/urdf/ros2_control/z1_1f_ros2_control.xacro" />
        <xacro:z1_1f_ros2_control prefix="${prefix}" sim_gazebo="${sim_gazebo}" />

        <xacro:if value="${sim_gazebo}">
            <xacro:include filename="$(find z1_1f_description)/urdf/gz/z1_1f.gazebo.xacro" />
            <xacro:z1_1f_gazebo prefix="${prefix}" />
        </xacro:if>

    </xacro:macro>

</robot>